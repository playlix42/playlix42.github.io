<html>
	<head>
		<script src='calculator/jquery-3.4.1.js'></script>
		<script src='calculator/jquery.formnavigation.js'></script>
		<script src='calculator/mousetrap.min.js'></script>
		<link rel="stylesheet" href="styles.css">
		<meta charset="UTF-8">
	</head>
	<body>
	<xyz>
		<script type="text/javascript">
			var val1 = "";
			var val2 = "";
			var mode = "";
			var cursor = "█";
			function ButtonClick(event) {
				if (mode == "" || mode == '√') {
					if (event == '1') {
						val1 = val1 + '1';
					} else if (event == '2') {
						val1 = val1 + '2';
					} else if (event == '3') {
						val1 = val1 + '3';
					} else if (event == '4') {
						val1 = val1 + '4';
					} else if (event == '5') {
						val1 = val1 + '5';
					} else if (event == '6') {
						val1 = val1 + '6';
					} else if (event == '7') {
						val1 = val1 + '7';
					} else if (event == '8') {
						val1 = val1 + '8';
					} else if (event == '9') {
						val1 = val1 + '9';
					} else if (event == '0') {
						val1 = val1 + '0';
					} else if (event == '.') {
						val1 = val1 + '.';
					} else if (event == 'c') {
						val1 = "";
					} else if (event == 'ce') {
						if (mode == "√") {
							if (val1 == "") {
								mode = "";
								val1 = val2;
								val2 = "";
							} else {
								val1 = "";
							}
						} else {
							val1 = "";
						}
					} else if (event == 'r' && mode == "√") {
							val1 = calculate(mode, val1, val2);
							val2 = "";
							mode = "";
					} else if (event == '+') {
						if (mode != "√") {
							mode = '+';
						} else {
							val1 = calculate(mode, val1, val2);
							val2 = "";
							mode='+';
						}
					} else if (event == '-') {
						if (mode != "√") {
							mode = '-';
						} else {
							val1 = calculate(mode, val1, val2);
							val2 = "";
							mode='-';
						}
					} else if (event == '*') {
						if (mode != "√") {
							mode = '*';
						} else {
							val1 = calculate(mode, val1, val2);
							val2 = "";
							mode = '*';
						}
					} else if (event == '/') {
						if (mode != "√") {
							mode = '/';
						} else {
							val1 = calculate(mode, val1, val2);
							val2 = "";
							mode = '/';
						}
					} else if (event == '√') {
						if (val2 == "") {
							mode = '√';
							val2 = val1;
							val1 = "";
						} else {
							val2 = calculate(mode, val1, val2);
							val1 = "";
							mode = "√";
						}
					} else if (event == '^') {
						if ( mode != "√") {
							mode = '^';
						} else {
							val1 = calculate(mode, val1, val2);
							val2 = "";
							mode = '^';
						}
					}
				} else {
					if (event == '1') {
						val2 = val2 + '1';
					} else if (event == '2') {
						val2 = val2 + '2';
					} else if (event == '3') {
						val2 = val2 + '3';
					} else if (event == '4') {
						val2 = val2 + '4';
					} else if (event == '5') {
						val2 = val2 + '5';
					} else if (event == '6') {
						val2 = val2 + '6';
					} else if (event == '7') {
						val2 = val2 + '7';
					} else if (event == '8') {
						val2 = val2 + '8';
					} else if (event == '9') {
						val2 = val2 + '9';
					} else if (event == '0') {
						val2 = val2 + '0';
					} else if (event == '.') {
						val2 = val2 + '.';
					} else if (event == 'c') {
						val1 = "";
						val2 = "";
						mode = "";
					} else if (event == 'ce') {
						if (val2 == "") {
							mode = "";
						} else {
							val2 = "";
						}
					} else if (event == 'r') {
						val1 = calculate(mode, val1, val2);
						val2 = "";
						mode = "";
					} else if (event == '+') {
						val1 = calculate(mode, val1, val2);
						val2 = "";
						mode = '+';
					} else if (event == '-') {
						val1 = calculate(mode, val1, val2);
						val2 = "";
						mode = '-';
					} else if (event == '*') {
						val1 = calculate(mode, val1, val2);
						val2 = "";
						mode = '*';
					} else if (event == '/') {
						val1 = calculate(mode, val1, val2);
						val2 = "";
						mode = '/';
					} else if (event == '√') {
						val2 = calculate(mode, val1, val2);
						val1 = "";
						mode = "√";
					} else if (event == '^') {
						val1 = calculate(mode, val1, val2);
						val2 = "";
						mode = "^";
					}
				}
				document.getElementById("output").innerHTML = val1 + mode + val2 + cursor
			}
			function calculate(op, v1, v2) {
				if (op == '+') {
					return Number(v1) + Number(v2);
				} else if (op == '-') {
					return Number(v1) - Number(v2);
				} else if (op == '*') {
					return Number(v1) * Number(v2);
				} else if (op == '/') {
					if (v2 != "0") {
						return Number(v1) / Number(v2);
					} else {
						return "It's not allowed to divide by 0."
					}
				} else if (op == '√') {
					if (v2 != "0") {
						return Math.pow(Number(v2),1/Number(v1));
					} else {
						return "The 0th root doesn't exist."
					}
				} else if (op == '^') {
					return Math.pow(Number(v1),Number(v2));
				}
			}
			function KeyTrap(key, target) {
				Mousetrap.bind(key, function() { document.getElementById(target).click()});
			}
			$(document).ready(function () {
				$('.calculator').formNavigation();
			});
			KeyTrap('1',"1");
			KeyTrap('2',"2");
			KeyTrap('3',"3");
			KeyTrap('4',"4");
			KeyTrap('5',"5");
			KeyTrap('6',"6");
			KeyTrap('7',"7");
			KeyTrap('8',"8");
			KeyTrap('9',"9");
			KeyTrap('0',"0");
			KeyTrap('+',"+");
			KeyTrap('-',"-");
			KeyTrap('*',"*");
			KeyTrap('/',"/");
			KeyTrap('=',"r");
			KeyTrap('enter',"r");
			KeyTrap(',',"dot");
			KeyTrap('.',"dot");
			KeyTrap('r',"root");
			KeyTrap('e',"exponent");
			KeyTrap('^',"exponent");
			KeyTrap('c',"c");
			KeyTrap('del',"c");
			KeyTrap('backspace',"ce");
		</script>
		<script type="text/css">
			
		</script>
		<form action="" method="post" id="calc"></form>
		<a class="output" id="output">█</a><br>
		<table class="calculator">
			<tr>
				<td><input type="button" form="calc" onclick="ButtonClick('1');" name="1" value=1 class="number" id="1" autofocus></td>
				<td><input type="button" form="calc" onclick="ButtonClick('2');" name="2" value=2 class="number" id="2"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('3');" name="3" value=3 class="number" id="3"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('+');" name="+" value="+" class="operator" id="+"></td>
			</tr>
			<tr>
				<td><input type="button" form="calc" onclick="ButtonClick('4');" name="4" value=4 class="number" id="4"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('5');" name="5" value=5 class="number" id="5"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('6');" name="6" value=6 class="number" id="6"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('-');" name="-" value="-" class="operator" id="-"></td>
			</tr>
			<tr>
				<td><input type="button" form="calc" onclick="ButtonClick('7');" name="7" value=7 class="number" id="7"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('8');" name="8" value=8 class="number" id="8"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('9');" name="9" value=9 class="number" id="9"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('*');" name="*" value="*" class="operator" id="*"></td>
			</tr>
			<tr>
				<td><input type="button" form="calc" onclick="ButtonClick('c');" name="c" value="C" class="clear" id="c"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('0');" name="0" value=0 class="number" id="0"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('.');" name="." value="." class="number" id="dot"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('/');" name="/" value="/" class="operator" id="/"></td>
			</tr>
			<tr>
				<td><input type="button" form="calc" onclick="ButtonClick('ce');" name="ce" value="CE" class="clear" id="ce"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('√');" name="n-th root" value="ⁿ√" class="operator" id="root"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('^');" name="exponent" value="x^y" class="operator" id="exponent"></td>
				<td><input type="button" form="calc" onclick="ButtonClick('r');" name="r" value="=" class="result" id="r"></td>
			</tr>
		</table>
		<a id="test"></div>
	</body>
</html>
